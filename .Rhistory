return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
addresses <- mv$match_address[1:20]
shityeah <- alsgeocoder(addresses)
shityeah
addresses <- mv[-31,]$match_address[1:20]
addresses <- mv[-31,]$match_address
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
#colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
#colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:50]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:40]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:30]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:35]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:34]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:33]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:32]
shityeah <- alsgeocoder(addresses)
addresses <- mv[-31,]$match_address[1:33]
address
addresses
chk <- "15300 SE MCLOUGHLIN BLVD, 97267"
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
curl <- lapply(chk, urlgetter)
return <- GET(curl) %>% read_html %>% html_text %>% fromJSON()
curl
curl
return <- GET(unlist(curl)) %>% read_html %>% html_text %>% fromJSON()
return
return$status
return$status == "ZERO_RESULTS"
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#curl <- lapply(chk, urlgetter)
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
} else {
return("No Results")
}
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
return(goods)
} else {
return("No Results")
}
}
geocoder <- function(x){
gcreturn <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (gcreturn$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
geocoder <- function(x){
gcreturn <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (gcreturn$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status = "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#curl <- lapply(chk, urlgetter)
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, alscoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
curl <- lapply(chk, urlgetter)
df <- lapply(curl, geocoder)
df
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(curl, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
shityeah
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
goods <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
goods <- "No Results"
}
return(goods)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
shityeah
addresses <- mv[-31,]$match_address
shityeah <- alsgeocoder(addresses)
shityeah
alsgeocoder <- function(addresses){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(addresses, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
addressez <- mv[-31,]$match_address
shityeah <- alsgeocoder(addressez)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
geocoder <- function(){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(goods) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- GET(x) %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(results) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- x %>% read_html %>% html_text %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(results) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
View(shityeah)
rbind(shityeah)
lapply(shityeah, rbind)
chkers <- lapply(shityeah, rbind)
lapply
View(chkers)
shityeah <- alsgeocoder(addresses)
alsgeocoder <- function(x){
#This creates urls from the input addresses
urlgetter <- function(x){
str <- gsub(" ", "+", x)
togc <- paste0("http://www.datasciencetoolkit.org/maps/api/geocode/json?sensor=false&address=", str)
return(togc)
}
#This sends the urls to the Open Data Science Toolkit geocoder and returns lat, lon, address, and type
geocoder <- function(x){
return <- x %>% read_html() %>% html_text() %>% fromJSON()
if (return$status == "OK"){
results <- as.data.frame(cbind(return$results$geometry$location$lat, return$results$geometry$location$lng, paste0(return$results$address_components[[1]]$short_name, sep = " ", collapse = ""), return$results$geometry$location_typ))
colnames(results) <- c("Lat", "Lon", "Address", "Type")
} else {
results <- "No Results"
}
return(results)
}
urls <- lapply(x, urlgetter)
df <- lapply(urls, geocoder)
return(df)
}
shityeah <- alsgeocoder(addresses)
library(rvest)
library(jsonlite)
library(purrr)
library(dplyr)
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("/home/atrusty/alectrusty.github.io/")
#render your sweet site.
rmarkdown::render_site()
